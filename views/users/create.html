% rebase("base", page_title="Users")

<div id="spa" data-page_title="Create user" data-page_url="/users/create">
    <header class="sub-menu">
        <h1>New user</h1>
    </header>
    <section class="form-container">
        <form onsubmit="return false" novalidate="true" class="form-grid">
            <div class="input-container-full">
                <label for="name">Name</label>
                <input
                    type="text"
                    name="user_name"
                    id="name"
                    minlength="2"
                    maxlength="50"
                    placeholder=" "
                    required
                />
                <span class="hint">Min. 2 and max. 50 characters.</span>
            </div>
            <div class="input-container-full">
                <label for="email">Email</label>
                <input
                    type="email"
                    name="user_email" 
                    id="email"
                    pattern='^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,3}))$'
                    placeholder=" "
                    required
                />
                <span class="hint">Enter a valid e-mail.</span>
            </div>
            <div class="input-container-full">
                <label for="user-role">User role</label>
                <select
                    name="user_role_id" 
                    id="user-role"
                    required
                >
                    <option value="" selected disabled>Select user role</option>
                    <option value="3">Bar staff</option>
                    <option value="2">Bar admin</option>
                    % if session["role_id"] == 1:
                        <option value="1">Super user</option>
                    % end
                </select>
                <span class="hint">Select a user role.</span>
            </div>
            <div class="input-container-full">
                <label for="user_password">Password</label>
                <input 
                    type="password" 
                    id="user_password" 
                    name="user_password" 
                    pattern="^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$" 
                    placeholder=" "
                    required
                />
                <span class="hint">Must include one uppercase letter, one lowercase letter, one digit, and a special character (#?!@$%^&*-).</span>
            </div>
            <div class="input-container-full">
                <label for="user_confirm_password">Repeat password</label>
                <input 
                    type="password"
                    id="user_confirm_password"
                    name="user_confirm_password"
                    pattern="^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$" 
                    placeholder=" "
                    required
                />
                <span class="hint">Repeat your chosen password.</span>
            </div>
    
            <button onclick="validateForm( postUser )">Create user</button>
        </form>
    </section>
</div>

